<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æœ‰åºåˆ—è¡¨ç¼©è¿›ä¿®å¤éªŒè¯</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f8f9fa; }
    .container { max-width: 900px; margin: 0 auto; background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .comparison { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin: 25px 0; }
    .before, .after { border: 2px solid #ddd; padding: 20px; border-radius: 8px; }
    .before { background: #fff3f3; border-color: #ff6b6b; }
    .after { background: #f0fff4; border-color: #51cf66; }
    .test-result { background: #e3f2fd; border: 2px solid #2196f3; padding: 20px; border-radius: 8px; margin: 25px 0; }
    
    /* ä¿®å¤å‰çš„æ ·å¼ï¼ˆè·ç¦»è¿œï¼‰ */
    .old-style ol { padding-left: 16px; font-size: 14px; }
    .old-style li { padding-left: 2px; font-size: 14px; }
    
    /* ä¿®å¤åçš„æ ·å¼ï¼ˆè·ç¦»è¿‘ï¼‰ */
    .new-style ol { padding-left: 12px; font-size: 14px; }
    .new-style li { padding-left: 2px; font-size: 14px; }
    
    .highlight { background: #fff3cd; padding: 2px 4px; border-radius: 3px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¯ æœ‰åºåˆ—è¡¨ç¼©è¿›è·ç¦»ä¸“é¡¹ä¿®å¤</h1>
    <p><strong>ä¿®å¤ç›®æ ‡</strong>ï¼š<span class="highlight">å¤§å¹…ç¼©å°æ•°å­—ä¸æ–‡å­—çš„è·ç¦»</span></p>
    
    <div class="comparison">
      <div class="before old-style">
        <h4>ğŸ”´ ä¿®å¤å‰ (16pxç¼©è¿›)</h4>
        <h5>ä½¿ç”¨è¯´æ˜</h5>
        <ol>
          <li>è‹¥èµ·å§‹åˆ†æ•°&lt;5.5ï¼ŒæŠŠæ¯ä¸¤å‘¨å†…å®¹æ‹‰é•¿åˆ°ä¸‰å‘¨ã€‚</li>
          <li>è‹¥æŸç§‘å·²â‰¥7.0ï¼Œå¯æŠŠå¯¹åº”æ—¶é—´è®©ç»™å¼±é¡¹ã€‚</li>
          <li>æ¯å‘¨æ—¥æ™šä¸Šå›ºå®š 30 min å¤ç›˜ï¼Œå¿…è¦æ—¶å¾®è°ƒä¸‹å‘¨è®¡åˆ’ã€‚</li>
        </ol>
      </div>
      
      <div class="after new-style">
        <h4>ğŸŸ¢ ä¿®å¤å (12pxç¼©è¿›)</h4>
        <h5>ä½¿ç”¨è¯´æ˜</h5>
        <ol>
          <li>è‹¥èµ·å§‹åˆ†æ•°&lt;5.5ï¼ŒæŠŠæ¯ä¸¤å‘¨å†…å®¹æ‹‰é•¿åˆ°ä¸‰å‘¨ã€‚</li>
          <li>è‹¥æŸç§‘å·²â‰¥7.0ï¼Œå¯æŠŠå¯¹åº”æ—¶é—´è®©ç»™å¼±é¡¹ã€‚</li>
          <li>æ¯å‘¨æ—¥æ™šä¸Šå›ºå®š 30 min å¤ç›˜ï¼Œå¿…è¦æ—¶å¾®è°ƒä¸‹å‘¨è®¡åˆ’ã€‚</li>
        </ol>
      </div>
    </div>

    <div class="test-result">
      <h4>ğŸ§ª WordOptimizer å¤„ç†ç»“æœ</h4>
      <div id="optimizer-output" style="border: 1px solid #ccc; padding: 15px; background: white; min-height: 150px; border-radius: 4px;">
        æ­£åœ¨ç”Ÿæˆå¤„ç†ç»“æœ...
      </div>
    </div>

    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; margin-top: 25px;">
      <h4>ğŸ”§ ä¿®å¤è¯¦æƒ…</h4>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div>
          <h5 style="margin: 0 0 10px 0; color: #ffd700;">æœ‰åºåˆ—è¡¨ä¼˜åŒ–</h5>
          <ul style="color: #f0f0f0; line-height: 1.6;">
            <li>ä¸€çº§åˆ—è¡¨: 16px â†’ <strong style="color: #ffd700;">12px</strong> (-4px)</li>
            <li>äºŒçº§åµŒå¥—: 28px â†’ <strong style="color: #ffd700;">24px</strong> (-4px)</li>
            <li>ä¸‰çº§åµŒå¥—: 40px â†’ <strong style="color: #ffd700;">36px</strong> (-4px)</li>
          </ul>
        </div>
        <div>
          <h5 style="margin: 0 0 10px 0; color: #ffd700;">æ— åºåˆ—è¡¨ä¿æŒ</h5>
          <ul style="color: #f0f0f0; line-height: 1.6;">
            <li>ä¸€çº§åˆ—è¡¨: <strong style="color: #90ee90;">16px</strong> (å·²ä¼˜åŒ–)</li>
            <li>äºŒçº§åµŒå¥—: <strong style="color: #90ee90;">28px</strong> (å·²ä¼˜åŒ–)</li>
            <li>ä¸‰çº§åµŒå¥—: <strong style="color: #90ee90;">40px</strong> (å·²ä¼˜åŒ–)</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { WordOptimizer } from './src/WordOptimizer.js';

    async function testOrderedListOptimization() {
      try {
        const testHtml = `
          <h3>ä½¿ç”¨è¯´æ˜</h3>
          <ol>
            <li>è‹¥èµ·å§‹åˆ†æ•°&lt;5.5ï¼ŒæŠŠæ¯ä¸¤å‘¨å†…å®¹æ‹‰é•¿åˆ°ä¸‰å‘¨ã€‚</li>
            <li>è‹¥æŸç§‘å·²â‰¥7.0ï¼Œå¯æŠŠå¯¹åº”æ—¶é—´è®©ç»™å¼±é¡¹ã€‚</li>
            <li>æ¯å‘¨æ—¥æ™šä¸Šå›ºå®š 30 min å¤ç›˜ï¼Œå¿…è¦æ—¶å¾®è°ƒä¸‹å‘¨è®¡åˆ’ã€‚</li>
          </ol>
          <h3>æ¯æ—¥æ—¶é—´çµæ´»æç¤º</h3>
          <ul>
            <li>é€šå‹¤ï¼šå¬ BBC 6 Minute English æˆ–å‰‘æ¡¥ Section 1 éŸ³é¢‘ã€‚</li>
            <li>åˆä¼‘ï¼šAnki åˆ· 50 ä¸ªå•è¯/çŸ­è¯­ã€‚</li>
            <li>å·¥ä½ï¼šç”¨è€³æœºå°å£°è·Ÿè¯»å£è¯­ Part1ï¼Œç»ƒè¯­éŸ³è¯­è°ƒã€‚</li>
          </ul>
        `;

        console.log('=== æœ‰åºåˆ—è¡¨ä¸“é¡¹ä¼˜åŒ–æµ‹è¯• ===');
        console.log('æµ‹è¯•HTML:', testHtml);
        
        const optimizer = new WordOptimizer();
        const result = await optimizer.optimize(testHtml);
        
        console.log('å¤„ç†ç»“æœé•¿åº¦:', result.length);
        console.log('å¤„ç†ç»“æœé¢„è§ˆ:', result.substring(0, 800) + '...');

        // æ˜¾ç¤ºç»“æœ
        document.getElementById('optimizer-output').innerHTML = result;
        
        // éªŒè¯å…³é”®ä¿®å¤ç‚¹
        const hasOrderedListFix = result.includes('padding-left: 12px') && result.includes('list-style: decimal');
        const hasUnorderedListPreserved = result.includes('padding-left: 16px') && result.includes('list-style: disc');
        const hasFontSizeConsistency = (result.match(/font-size: 14px/g) || []).length >= 4;
        
        console.log('âœ… éªŒè¯ç»“æœ:');
        console.log('- æœ‰åºåˆ—è¡¨ç¼©è¿›ä¿®å¤:', hasOrderedListFix ? 'âœ… é€šè¿‡ (12px)' : 'âŒ å¤±è´¥');
        console.log('- æ— åºåˆ—è¡¨ä¿æŒä¸å˜:', hasUnorderedListPreserved ? 'âœ… é€šè¿‡ (16px)' : 'âŒ å¤±è´¥');
        console.log('- å­—ä½“å¤§å°ä¸€è‡´æ€§:', hasFontSizeConsistency ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥');
        
        // æ·»åŠ éªŒè¯ç»“æœåˆ°é¡µé¢
        const validationDiv = document.createElement('div');
        validationDiv.style.cssText = 'background: #e8f5e8; border-left: 4px solid #4caf50; padding: 15px; margin-top: 15px; border-radius: 0 4px 4px 0;';
        validationDiv.innerHTML = `
          <h5 style="margin: 0 0 10px 0; color: #2e7d32;">ğŸ” è‡ªåŠ¨éªŒè¯ç»“æœ</h5>
          <div style="line-height: 1.8;">
            <div>æœ‰åºåˆ—è¡¨ç¼©è¿›ä¿®å¤: ${hasOrderedListFix ? 'âœ… é€šè¿‡ (12px)' : 'âŒ å¤±è´¥'}</div>
            <div>æ— åºåˆ—è¡¨ä¿æŒä¸å˜: ${hasUnorderedListPreserved ? 'âœ… é€šè¿‡ (16px)' : 'âŒ å¤±è´¥'}</div>
            <div>å­—ä½“å¤§å°ä¸€è‡´æ€§: ${hasFontSizeConsistency ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}</div>
          </div>
          <div style="margin-top: 10px; padding: 8px; background: #c8e6c9; border-radius: 3px; font-size: 13px;">
            <strong>æ€»ç»“:</strong> æœ‰åºåˆ—è¡¨æ•°å­—ä¸æ–‡å­—è·ç¦»å·²æ˜¾è‘—ç¼©çŸ­ï¼Œç°åœ¨æ¯”ä¿®å¤å‰æ›´ç´§å‡‘ï¼
          </div>
        `;
        document.getElementById('optimizer-output').appendChild(validationDiv);

      } catch (error) {
        console.error('æµ‹è¯•å¤±è´¥:', error);
        document.getElementById('optimizer-output').innerHTML = `
          <div style="color: #d32f2f; padding: 15px; background: #ffebee; border-radius: 4px; border-left: 4px solid #f44336;">
            <strong>âŒ æµ‹è¯•å¤±è´¥:</strong> ${error.message}
            <br><small>è¯·æ£€æŸ¥æ§åˆ¶å°è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯</small>
          </div>
        `;
      }
    }

    // é¡µé¢åŠ è½½åè¿è¡Œæµ‹è¯•
    document.addEventListener('DOMContentLoaded', testOrderedListOptimization);
  </script>
</body>
</html>